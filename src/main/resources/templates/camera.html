<!DOCTYPE html>
<html lang="en" xmlns:th= "http://www.thymeleof.org">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>IOT-N13</title>
<!-- Tell the browser to be responsive to screen width -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Font Awesome -->
<link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
<!-- Ionicons -->
<link rel="stylesheet"
	href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
<!-- Tempusdominus Bbootstrap 4 -->
<link rel="stylesheet"
	href="plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
<!-- iCheck -->
<link rel="stylesheet"
	href="plugins/icheck-bootstrap/icheck-bootstrap.min.css">
<!-- JQVMap -->
<link rel="stylesheet" href="plugins/jqvmap/jqvmap.min.css">
<!-- Theme style -->
<link rel="stylesheet" href="dist/css/adminlte.min.css">
<!-- overlayScrollbars -->
<link rel="stylesheet"
	href="plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
<!-- Daterange picker -->
<link rel="stylesheet"
	href="plugins/daterangepicker/daterangepicker.css">
<!-- summernote -->
<link rel="stylesheet" href="plugins/summernote/summernote-bs4.css">
<!-- Google Font: Source Sans Pro -->
<link
	href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700"
	rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
.preloader {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 999999999;
  width: 100%;
  height: 100%;
  background-color: #fff;
  overflow: hidden;
}
.preloader-inner {
  position: absolute;
  top: 50%;
  left: 50%;
  -webkit-transform: translate(-50%,-50%);
  -moz-transform: translate(-50%,-50%);
  transform: translate(-50%,-50%);
}
.preloader-icon {
  width: 100px;
  height: 100px;
  display: inline-block;
  padding: 0px;
}
.preloader-icon span {
  position: absolute;
  display: inline-block;
  width: 50px;
  height: 50px;
  border-radius: 100%;
  background:red;
  -webkit-animation: preloader-fx 2s linear infinite;
  animation: preloader-fx 2s linear infinite;
}
.preloader-icon span:last-child {
  animation-delay: -0.8s;
  -webkit-animation-delay: -0.8s;
}
@keyframes preloader-fx {
  0% {transform: scale(0, 0); opacity:0.5;}
  100% {transform: scale(1, 1); opacity:0;}
}
@-webkit-keyframes preloader-fx {
  0% {-webkit-transform: scale(0, 0); opacity:0.5;}
  100% {-webkit-transform: scale(1, 1); opacity:0;}
}
.table-dark tr th {
	text-align: center;
}

.table tbody tr td {
	text-align: center;
	vertical-align: middle;
}

/* CSS cho các trang khác */
#chartSelect {
	padding: 5px; /* Kích thước padding bên trong select */
	border: 1px solid red; /* Viền xung quanh select */
	border-radius: 4px; /* Bo tròn viền của select */
	font-size: 15px; /* Kích thước chữ */
	background-color: #fff; /* Màu nền của select */
	color: #333; /* Màu chữ của select */
	appearance: none;
	/* Ẩn giao diện mặc định của select (đối với trình duyệt webkit-based) */
	cursor: pointer; /* Con trỏ khi hover qua select */
}

/* Tùy chỉnh giao diện cho tùy chọn option */
#chartSelect option {
	font-size: 14px; /* Kích thước chữ */
	background-color: #fff; /* Màu nền của option */
	color: #333; /* Màu chữ của option */
}

/* Tùy chỉnh giao diện khi select được nhấp chọn */
#chartSelect:focus {
	border-color: #007bff; /* Màu viền khi select được chọn */
	box-shadow: 0 0 5px rgb(64, 128, 128);
	/* Hiệu ứng bóng khi select được chọn */
}

/* Tùy chỉnh giao diện khi hover qua option */
#chartSelect option:hover {
	background-color: #007bff; /* Màu nền khi hover qua option */
	color: #fff; /* Màu chữ khi hover qua option */
}

#page-numbers1 button {
	margin-right: 1px;
	margin-left: 1px;
	width: 30px;
}

#pagination1 {
	display: flex;
	justify-content: center;
	align-items: center;
	margin-top: 10px;
	/* Điều chỉnh khoảng cách giữa container và pagination theo ý muốn */
}

#pagination1 #page-numbers1 :active {
	background-color: gray;
}

#page-numbers1 button.active {
	border-color: gray !important;
	background-color: gray !important;
	color: white !important;
}

#page-numbers1 {
	display: flex;
	justify-content: center;
	align-items: center;
}

#page-numbers1 button {
	margin-right: 1px;
	margin-left: 1px;
	width: 30px;
	border: 1px solid black; /* Viền màu đen */
}

#page-numbers1 button.active {
	border-color: gray; /* Viền màu đỏ cho nút đã chọn */
	background-color: gray; /* Nền màu đỏ cho nút đã chọn */
	color: white; /* Màu chữ trắng cho nút đã chọn */
}

#page-numbers2 button {
	margin-right: 1px;
	margin-left: 1px;
	width: 30px;
}

#pagination2 {
	display: flex;
	justify-content: center;
	align-items: center;
	margin-top: 10px;
	/* Điều chỉnh khoảng cách giữa container và pagination theo ý muốn */
}

#pagination2 #page-numbers2 :active {
	background-color: gray;
}

#page-numbers2 button.active {
	border-color: gray !important;
	background-color: gray !important;
	color: white !important;
}

#page-numbers2 {
	display: flex;
	justify-content: center;
	align-items: center;
}

#page-numbers2 button {
	margin-right: 1px;
	margin-left: 1px;
	width: 30px;
	border: 1px solid black; /* Viền màu đen */
}

#page-numbers2 button.active {
	border-color: gray; /* Viền màu đỏ cho nút đã chọn */
	background-color: gray; /* Nền màu đỏ cho nút đã chọn */
	color: white; /* Màu chữ trắng cho nút đã chọn */
}

.custom-modal {
	display: none;
	position: fixed;
	z-index: 1;
	background-color: #fefefe;
	border: 1px solid #888;
	max-width: 100%;
	max-height: 100%;
	width: auto;
	height: auto;
	text-align: center;
	overflow: hidden;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
}

.modal-content {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 100%;
	max-width: none;
	max-height: none;
}

.modal-content img {
	max-width: 100%;
	max-height: 100%;
	width: auto;
	height: auto;
}

.enlarged-modal img {
	max-width: 350px;
	max-height: 370px;
	width: auto;
	height: auto;
}

#enlargeButton {
	position: absolute;
	top: 3px;
	left: 0;
	right: 0;
	font-size: 20px;
	cursor: pointer;
	display: flex;
	justify-content: center;
	z-index: 1; /* Để nút nằm phía trên hình ảnh */
}

#imageContainer {
	display: none;
	position: relative;
}

#closeButton {
	position: absolute;
	top: 5px;
	right: 5px;
	cursor: pointer;
}
</style>
</head>
<body class="hold-transition sidebar-mini layout-fixed">
	<div class="wrapper">

		<!-- Navbar -->
		<nav
			class="main-header navbar navbar-expand navbar-white navbar-light"
			style="height: 45px">
			<!-- Left navbar links -->
			<ul class="navbar-nav">
				<li class="nav-item"><a class="nav-link" data-widget="pushmenu"
					href="#" role="button"><i class="fas fa-bars"></i></a></li>
			</ul>

			<!-- Right navbar links -->
		</nav>
		<!-- /.navbar -->

		<!-- Main Sidebar Container -->
		<aside class="main-sidebar sidebar-dark-primary elevation-4">
			<!-- Brand Logo -->
			<!-- Sidebar -->
			<div style="height: 430px" class="sidebar">
				<!-- Sidebar user panel (optional) -->
				<div class="user-panel mt-3 pb-3 mb-3 d-flex">
					<div class="image">
						<i style="margin-left: 10px;margin-top: 10px;color: white;" class="fa fa-user-circle nav-icon"></i>
					</div>
					<div class="info">
						<a href="#" class="d-block" style="text-decoration: none" th:if = "${session.account!=null}">[[${session.account.username}]]</a>
					</div>
				</div>

				<!-- Sidebar Menu -->
				<nav class="mt-2">
					<ul class="nav nav-pills nav-sidebar flex-column"
						data-widget="treeview" role="menu" data-accordion="false">
						<!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
						<li class="nav-item has-treeview menu-open"><a
							style="background-color: rgb(32, 178, 170)" th:href="@{/admin}"
							class="nav-link active"> <i class="fa fa-camera-retro nav-icon"></i>
								<p>Camera</p>
						</a></li>
						<li class="nav-item has-treeview"><a style="cursor: pointer;"
							class="nav-link"> <i class="nav-icon fa fa-institution"></i>
								<p>
									Quản Lý <i class="fas fa-angle-left right"></i> <span
										class="badge badge-info right">1</span>
								</p>
						</a>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a th:href="@{/history}"
									class="nav-link"> <i class="fa fa-pencil-square-o nav-icon"></i>
										<p>Lịch sử</p>
								</a></li>
							</ul></li>
						<li class="nav-item" id="camera-li"><a th:href="@{/logout}"
							class="nav-link"> <i class="fa fa-sign-out nav-icon"></i>
								<p>Thoát</p>
						</a></li>
					</ul>
				</nav>
				<!-- /.sidebar-menu -->

			</div>
			<!-- /.sidebar -->
		</aside>
		<div style="background-color: white" class="content-wrapper">
             <div class="container">
                 <div style="display: flex">
                 	<div style="width: 450px;height: 520px">
                 		<div id="imageContainer">
                     <img id="camera" style="height: 400px; width: 100%; cursor: pointer;">
                 </div>
                 <div id="preloaderIcon" style="margin-left: 200px; margin-top: 16px;width: 450px;" class="preloader-icon">
				     <span></span>
				     <span></span>
			     </div>	
                 	</div>
                 	
                 	<div style="background-color: red;width: 600px">
                 		<div style="background-color: white;">
						    <span th:if="${detail != null}" th:text="${detail.ownerName}">...</span>
						</div>
                 		 <!-- hiển thị thông tin xe -->
                 		 
                 		 <div style="background-color: white;">
                 			Helooo
                 		</div>
                 	</div>
                 </div>	
             </div>
        </div>

		
		<!-- bang du lieu -->

		<aside class="control-sidebar control-sidebar-dark">
			<!-- Control sidebar content goes here -->
		</aside>
		<!-- /.control-sidebar -->
	</div>

</body>
<script src="../../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="../../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../../dist/js/demo.js"></script>
<script>
const imageController = new AbortController();
const imageElement = document.getElementById('camera');
const imageContainer = document.getElementById('imageContainer');
const preloaderIcon = document.getElementById('preloaderIcon');
const imageUrl = 'http://localhost:5000/camera'; // URL của video

// Sự kiện onload để kiểm tra khi video tải thành công
imageElement.onload = function() {
    if (imageContainer) {
        imageContainer.style.display = 'block';
    }
    setTimeout(function() {
        if (preloaderIcon) {
            preloaderIcon.style.display = 'block';
        }
    }, 1000);
};


// Cập nhật src của thẻ img với sự hỗ trợ của signal
imageElement.src = imageUrl;

</script>

</html>






